@page "/"
@using DealershipLibrary.Vehicle.Cars
@using DealershipLibrary
@using System.ComponentModel.DataAnnotations;
@using Microsoft.Extensions.Logging

<h3>Shaden's Dealership</h3> 
<div>
    <span>
        <select id="vehicleType" @onchange="(e)=>SelectVehicle(e.Value.ToString())">
            <option value="">Choose Vehicle</option>

            @foreach (var item in vehicleTypesList)
            {
                <option value="@item">@item</option>
            }
        </select>
    

        @if (vehicleType == VehicleTypes.Car)
        {
            <CarComponent OnAdd="@vehicleAdded"></CarComponent> //Car component
        }  
        else if(vehicleType == VehicleTypes.Motorcycle)
        {
            <MotorcycleComponent OnAdd="vehicleAdded"></MotorcycleComponent> //Motorcycle component 
        }
        else if(vehicleType == VehicleTypes.Truck)
        {
        <TruckComponent OnAdd="vehicleAdded"></TruckComponent> //Truck component        
        } 

        @foreach (var v in VehiclesList)
        {
            @*<p>@v.color @v.Model.Name</p>*@
        }
    </span>
</div>


@code
{
    List<string> vehicleTypesList = Extensions.GetEnumItems(typeof(VehicleTypes));
    public List<IVehicle> VehiclesList { get; set; } = new List<IVehicle>();
    string message;

    [Required(ErrorMessage = "Select a Vehicle Type")]    
    VehicleTypes vehicleType;
    void SelectVehicle(string value)
    {
        this.vehicleType = (VehicleTypes)System.Enum.Parse(typeof(VehicleTypes), value);
    }

    void vehicleAdded(IVehicle vehicle)
    {
        this.VehiclesList.Add(vehicle);
    }
}